(this["webpackJsonpsw-lib"]=this["webpackJsonpsw-lib"]||[]).push([[0],{19:function(t,e,a){t.exports={field:"index__field__1yLuk",cell:"index__cell__2mWZ7"}},20:function(t,e,a){t.exports={item:"LibraryItem_item__caTgO",title:"LibraryItem_title__3wyVI",imageContainer:"LibraryItem_imageContainer__3gzaU",image:"LibraryItem_image__2YdyY"}},25:function(t,e,a){"use strict";a.r(e),e.default=a.p+"static/media/person.35f6be26.png"},28:function(t,e,a){t.exports={fieldItem:"FieldList_fieldItem__3rjlT"}},29:function(t,e,a){t.exports={image:"ImageBlock_image__2slNy"}},35:function(t,e,a){},44:function(t,e,a){},46:function(t,e,a){"use strict";a.r(e),e.default=a.p+"static/media/planet.252fd78b.png"},47:function(t,e,a){"use strict";a.r(e),e.default=a.p+"static/media/starship.5a581eb4.png"},48:function(t,e,a){},49:function(t,e,a){},50:function(t,e,a){},51:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a(1),i=a(26),s=a.n(i),c=a(7),l=(a(35),function(){return Object(n.jsxs)("header",{className:"header",children:[Object(n.jsx)("div",{className:"header__logo"}),Object(n.jsx)("nav",{className:"header__nav nav",children:Object(n.jsxs)("ul",{className:"nav__list",children:[Object(n.jsx)("li",{className:"nav__item",children:Object(n.jsx)(c.c,{className:"nav__link",to:"/",exact:!0,children:"Home"})}),Object(n.jsx)("li",{className:"nav__item",children:Object(n.jsx)(c.c,{className:"nav__link",to:"/people",children:"People"})}),Object(n.jsx)("li",{className:"nav__item",children:Object(n.jsx)(c.c,{className:"nav__link",to:"/planets",children:"Planets"})}),Object(n.jsx)("li",{className:"nav__item",children:Object(n.jsx)(c.c,{className:"nav__link",to:"/starships",children:"Starships"})})]})})]})}),o=(a(44),function(){return Object(n.jsx)("div",{className:"searchBar",children:Object(n.jsx)("input",{type:"text",className:"searchBar__input"})})}),u=a(2),d=a(10),m=a.n(d),h=a(17),j=a(11),f=a(8),p=a(18),b=a(25),v=a(46),g=a(47),O=Object(p.a)("idTemplate"),_=Object(p.a)("getItemId"),x=Object(p.a)("getImageUrl"),y=function t(){var e=this;Object(j.a)(this,t),Object.defineProperty(this,O,{writable:!0,value:/\/([0-9]+)\//}),this.SW_BASE_URL="https://swapi.dev/api",this.PERSON_IMG_URL="https://starwars-visualguide.com/assets/img/characters/",this.PLANET_IMG_URL="https://starwars-visualguide.com/assets/img/planets/",this.STARSHIP_IMG_URL="https://starwars-visualguide.com/assets/img/starships/",this.SW_CATEGORIES={people:function(t){return e.modifyPerson(t)},planets:function(t){return e.modifyPlanet(t)},starships:function(t){return e.modifyStarship(t)}},Object.defineProperty(this,_,{writable:!0,value:function(t){return t.match(Object(f.a)(e,O)[O])[1]}}),Object.defineProperty(this,x,{writable:!0,value:function(t,e){return t+e+".jpg"}}),this.modifyPerson=function(t){var a=Object(f.a)(e,_)[_](t.url);return{id:a,imageUrl:Object(f.a)(e,x)[x](e.PERSON_IMG_URL,a),defaultImageUrl:b.default,name:t.name,info:[{id:1,title:"Name",value:t.name},{id:2,title:"Gender",value:t.gender},{id:3,title:"Year of birth",value:t.birth_year},{id:4,title:"Height",value:t.height},{id:5,title:"Mass",value:t.mass}]}},this.modifyPlanet=function(t){var a=Object(f.a)(e,_)[_](t.url);return{id:a,imageUrl:Object(f.a)(e,x)[x](e.PLANET_IMG_URL,a),defaultImageUrl:v.default,name:t.name,info:[{id:1,title:"Name",value:t.name},{id:2,title:"Rotation period",value:t.rotation_period},{id:3,title:"Climate",value:t.climate},{id:4,title:"Terrain",value:t.terrain},{id:5,title:"Population",value:t.population}]}},this.modifyStarship=function(t){var a=Object(f.a)(e,_)[_](t.url);return{id:a,imageUrl:Object(f.a)(e,x)[x](e.STARSHIP_IMG_URL,a),defaultImageUrl:g.default,name:t.name,info:[{id:1,title:"Name",value:t.name},{id:2,title:"Model",value:t.model},{id:3,title:"Length",value:t.length},{id:4,title:"Passengers",value:t.passengers},{id:5,title:"HyperDrive rating",value:t.hyperdrive_rating}]}},this.getData=function(){var t=Object(h.a)(m.a.mark((function t(a,n){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e.SW_BASE_URL+a,{signal:n.signal});case 2:return r=t.sent,t.next=5,r.json();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),this.getItemData=function(){var t=Object(h.a)(m.a.mark((function t(a,n,r){var i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getData(a,r);case 2:return i=t.sent,t.abrupt("return",e.SW_CATEGORIES[n](i));case 4:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),this.getListData=function(){var t=Object(h.a)(m.a.mark((function t(a,n,r){var i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getData(a,r);case 2:return i=t.sent,t.abrupt("return",i.results.map(e.SW_CATEGORIES[n]));case 4:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}()},L=a(14),N=a(16),I=a(15),w=(a(48),function(){return Object(n.jsx)("div",{className:"spinner",children:"loading..."})}),S=function(t){Object(N.a)(a,t);var e=Object(I.a)(a);function a(){var t;Object(j.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).state={loadedData:null,isLoading:!0,isError:!1},t._fetchController=null,t.startLoading=function(){t.setState({loadedData:null,isLoading:!0,isError:!1})},t.handleSucces=function(e){t.setState({loadedData:e,isLoading:!1,isError:!1})},t.handleError=function(e){if("AbortError"===e.name)return console.log("--- current fetch was aborted ----"),void t.startLoading();t.setState({isLoading:!1,isError:!0})},t.getLibraryData=function(e,a){t._fetchController&&t._fetchController.abort(),t._fetchController=new AbortController,console.log("--- new controller was created ---"),t.props.getData(e,a,t._fetchController).then(t.handleSucces).catch(t.handleError)},t}return Object(L.a)(a,[{key:"componentDidMount",value:function(){var t=this.props.match,e=t.url,a=t.params.category;this.getLibraryData(e,a)}},{key:"componentWillReceiveProps",value:function(t,e){t.match.url!==this.props.match.url&&this.startLoading()}},{key:"componentDidUpdate",value:function(t,e,a){if(t.match.url!==this.props.match.url){var n=this.props.match,r=n.url,i=n.params.category;this.getLibraryData(r,i)}}},{key:"componentWillUnmount",value:function(){this._fetchController.abort()}},{key:"render",value:function(){var t=this.state,e=t.isLoading,a=t.isError,r=t.loadedData,i=this.props.component;return console.log("render",this.state),a?Object(n.jsx)("div",{children:"error"}):e?Object(n.jsx)(w,{}):Object(n.jsx)(i,{data:r})}}]),a}(r.Component),U=function(t){var e=t.data,a=void 0===e?[]:e,r=t.match.url,i=a.map((function(t){return Object(n.jsx)("li",{className:"libraryList__item",children:Object(n.jsx)(c.b,{className:"libraryList__link",to:r+"/"+t.id,children:t.name})},t.id)}));return Object(n.jsx)("ul",{className:"libraryList",children:i.length?i:Object(n.jsx)("li",{className:"libraryList__item",children:"no items"})})},E=Object(u.f)(U),k=a(12),D=a.n(k),P=a(19),R=a.n(P),C=function(t){var e=t.fieldItem,a=t.classList,r=void 0===a?"":a;return Object(n.jsxs)("li",{className:D()(R.a.field,r),children:[Object(n.jsx)("span",{className:R.a.cell,children:e.title}),Object(n.jsx)("span",{className:R.a.cell,children:e.value})]})},A=a(28),T=a.n(A),G=function(t){var e=t.fieldList,a=t.classList,r=void 0===a?"":a;return Object(n.jsx)("ul",{className:D()(r),children:e.map((function(t){return Object(n.jsx)(C,{fieldItem:t,classList:T.a.fieldItem},t.id)}))})},M=(a(25),a(29)),W=a.n(M),B=function(t){Object(N.a)(a,t);var e=Object(I.a)(a);function a(){var t;Object(j.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).state={isLoading:!0,url:null},t}return Object(L.a)(a,[{key:"componentDidMount",value:function(){var t=this;fetch(this.props.url).then((function(t){if(t.status<=300)return t.blob();throw new Error})).then((function(e){var a=URL.createObjectURL(e);t.setState({isLoading:!1,url:a})})).catch((function(){t.setState({isLoading:!1,url:t.props.defaultUrl})}))}},{key:"render",value:function(){var t=this.state,e=t.isLoading,a=t.url;return e?Object(n.jsx)(w,{}):Object(n.jsx)("img",{className:W.a.image,src:a,alt:""})}}]),a}(r.Component),H=a(20),Y=a.n(H),J=function(t){var e=t.data,a=t.classList,r=void 0===a?"":a,i=e.info,s=e.name,c=e.imageUrl,l=e.defaultImageUrl;return Object(n.jsxs)("div",{className:D()(Y.a.item,r),children:[Object(n.jsx)("h2",{className:Y.a.title,children:s}),Object(n.jsx)("div",{className:Y.a.imageContainer,children:Object(n.jsx)(B,{url:c,defaultUrl:l})}),Object(n.jsx)(G,{fieldList:i}),Object(n.jsx)("button",{className:"backButton",type:"button",children:"<< Back"})]})},z=function(){return Object(n.jsx)("div",{children:"Page not found"})},F=function(){return Object(n.jsx)("div",{children:"Welcome to StarWars library home page"})},V=new y,Z=function(){return Object(n.jsx)("main",{children:Object(n.jsxs)(u.c,{children:[Object(n.jsx)(u.a,{path:"/",exact:!0,component:F}),Object(n.jsx)(u.a,{exact:!0,path:"/:category/:id",render:function(t){var e=t.match;return Object(n.jsx)(S,{match:e,getData:V.getItemData,component:J})}}),Object(n.jsx)(u.a,{exact:!0,path:"/:category",render:function(t){var e=t.match;return Object(n.jsx)(S,{match:e,getData:V.getListData,component:E})}}),Object(n.jsx)(u.a,{component:z})]})})},q=(a(49),function(){return Object(n.jsxs)("div",{className:"app",children:[Object(n.jsx)(l,{}),Object(n.jsx)(o,{}),Object(n.jsx)(Z,{})]})});a(50);s.a.render(Object(n.jsx)(c.a,{children:Object(n.jsx)(q,{})}),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.ffa85b83.chunk.js.map